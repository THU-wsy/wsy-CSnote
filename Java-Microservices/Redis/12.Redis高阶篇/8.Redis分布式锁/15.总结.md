# 总结

synchronized单机版OK； -> v1.0

Nginx分布式微服务，轮询多台服务器，单机锁不行；-> v2.0

取消单机锁，上redis分布式锁setnx，中小企业使用没问题；-> v3.1

​	只是加锁了，没有释放锁，出异常的话，可能无法释放锁，必须要在代码层面finally释放锁 -> v3.2

​	如果服务宕机，部署了微服务代码层面根本就没有走到finally这块，没办法保证解锁，这个Key没有被删除，需要对锁设置过期时间 -> v3.2

​	为redis的分布式锁key增加过期时间，还必须要保证setnx+过期时间在同一行，保证原子性 -> v4.1

​	程序由于执行超过锁的过期时间，所以在finally中必须规定只能自己删除自己的锁，不能把别人的锁删除了，防止张冠李戴 -> v5.0

将Lock、unlock变成LUA脚本保证原子性； -> v6.0

保证锁的可重入性，hset替代setnx+Lock变成LUA脚本，保障可重入性； -> v7.0

锁的自动续期 -> v8.0

